g1
setwd("~/")
library(ggmap)
library(rvest)
library(dplyr)
url = "http://www.starbuckseverywhere.net/StoreOpeningDates.htm"
html <- html(url)
# df <- html %>% html_nodes("table") %>% html_table()
save(df,file = "starbucks_data.Rda")
load("starbucks_data.Rda")
df
names(df)
df <- load("starbucks_data.Rda")
head(df)
library(ggmap)
library(rvest)
library(dplyr)
url = "http://www.starbuckseverywhere.net/StoreOpeningDates.htm"
html <- html(url)
df <- html %>% html_nodes("table") %>% html_table()
save(df,file = "starbucks_data.Rda")
load("starbucks_data.Rda")
library(ggmap)
library(rvest)
library(dplyr)
url = "http://www.starbuckseverywhere.net/StoreOpeningDates.htm"
# html <- html(url)
#
# df <- html %>% html_nodes("table") %>% html_table()
# save(df,file = "starbucks_data.Rda")
load("starbucks_data.Rda")
head(df)
df <- df[[1]]
head(df)
colnames(df) <- df[1,]
head(df)
df <- df[1:,]
df <- df[1:]
df <- df[1:nrow(df),]
head(df)
load("starbucks_data.Rda")
df <- df[[1]]
colnames(df) <- df[1,]
df <- df[2:nrow(df),]
head(df)
help("geocode")
head(df)
str(df)
gsub("\\"," ",df$Market)
library(ggmap)
library(rvest)
library(dplyr)
library(grep)
install.packages("grep")
install.packages("grep")
install.packages("grep")
gsub("\\"," ",df$Market)
install.packages(grep)
install.packages("gsubfn")
library(ggmap)
library(rvest)
library(dplyr)
library(gsubfn)
gsub("\\"," ",df$Market)
help(fsub)
help(gsub)
gsub("\"," ",df$Market)
gsub("\\\\"," ",df$Market)
head(df)
row <- df[1:,]
row <- df[1,]
row
library(ggmap)
library(rvest)
library(dplyr)
library(gsubfn)
location_str <- paste(row$Market,row$City,row$Name)
geocode(location_str)
geo_locations <- data.frame()
for(i in 1:10){
row <- df[i,]
location_str <- paste(row$Market,row$City,row$Name)
geo<-geocode(location_str)
geo_locations<- rbind(geo_locations,geo)
}
geo_locations
usa_composite() %>%
subset(!(iso_3166_2 %in% c("AK", "HI"))) %>%
hush_tidy() -> usa
install.packages("map")
install.packages("maps")
install.packages("maps")
help(usa)
help(maps)
help("maps")
library(maps)
help(maps)
help("maps")
library(maps)
all_states <- map_data("state")
all_states
head(all_states)
map("usa")
map("state")
map("state")
map("state")
plot(geo_locations$lat,geo_locations$lon)
mapgilbert <- get_map(location = c(lon = mean(df$lon), lat = mean(df$lat)), zoom = 4,
maptype = "satellite", scale = 2)
library(ggmap)
library(ggplot2)
library(rvest)
library(dplyr)
library(maps)
mapgilbert <- get_map(location = c(lon = mean(df$lon), lat = mean(df$lat)), zoom = 4,
maptype = "satellite", scale = 2)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 4,
maptype = "satellite", scale = 2)
ggmap(mapgilbert)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 3,
maptype = "satellite", scale = 2)
ggmap(mapgilbert)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 5,
maptype = "satellite", scale = 3)
ggmap(mapgilbert)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 2,
maptype = "satellite", scale = 4)
ggmap(mapgilbert)
help("get_map")
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = "auto",
maptype = "satellite", scale = 2)
ggmap(mapgilbert)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red", alpha = 0.8), size = 5, shape = 21) +
guides(fill=FALSE, alpha=FALSE, size=FALSE)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 2,
maptype = "satellite", scale = 2)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red", alpha = 0.8), size = 5, shape = 21) +
guides(fill=FALSE, alpha=FALSE, size=FALSE)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red", alpha = 0.8), size = 5, shape = 21) +guides(fill=FALSE, alpha=FALSE, size=FALSE)
help("geom_point")
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red", alpha = 0.8), size = 5, shape = 21))
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red", alpha = 0.8), size = 5, shape = 21)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 5)
install.packages("animation")
library(animation)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21)+ggplot()
ggmap(mapgilbert)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 2,
maptype = "satellite", scale = 2)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 2,
maptype = "satellite", scale = 2)
ggmap(mapgilbert)
# html <- html(url)
#
# df <- html %>% html_nodes("table") %>% html_table()
# save(df,file = "starbucks_data.Rda")
load("starbucks_data.Rda")
df <- df[[1]]
colnames(df) <- df[1,]
df <- df[2:nrow(df),]
gsub("\\\\"," ",df$Market)
row <- df[1,]
geo_locations <- data.frame()
for(i in 1:10){
row <- df[i,]
location_str <- paste(row$Market,row$City,row$Name)
geo<-geocode(location_str)
geo_locations<- rbind(geo_locations,geo)
}
geo_locations
location_str <- paste(row$Market,row$City,row$Name)
geocode(location_str)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 2,
maptype = "satellite", scale = 2)
ggmap(mapgilbert)
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 4,
maptype = "satellite", scale = 2)
ggmap(mapgilbert)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21,alpha=0.8)
ggmap(mapgilbert)+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
help("saveMovie")
mapgilbert <- get_map(location = c(lon = mean(geo_locations$lon), lat = mean(geo_locations$lat)), zoom = 4,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
mapgilbert <- get_map(location = c(lon = 39.8282, lat = 98.5795), zoom = 4,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
help("get_map")
mapgilbert <- get_map(location = c(lon = 39.8282, lat = 98.5795), zoom = 3,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
mapgilbert <- get_map(location = c(lon = 98.5795, lat = 39.8282), zoom = 3,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
mapgilbert <- get_map(location = c(lon = -98.5795, lat = 39.8282), zoom = 3,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
mapgilbert <- get_map(location = c(lon = -98.5795, lat = 39.8282), zoom = 4,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
mapgilbert <- get_map(location = c(lon = -98.5795, lat = 39.8282), zoom = 3.5,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
mapgilbert <- get_map(location = c(lon = -98.5795, lat = 39.8282), zoom = 3,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
g<-ggmap(mapgilbert)
# g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
plotfoo<- function(){
for(i in 1:nrow(geo_locations)){
each_location <- geo_locations[i,]
g <- g+geom_point(each_location,aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
print(g)
}
}
plotfoo()
plotfoo<- function(){
for(i in 1:nrow(geo_locations)){
each_location <- geo_locations[i,]
print(each_location)
g <- g+geom_point(each_location,aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
print(g)
}
}
plotfoo()
plotfoo<- function(){
for(i in 1:nrow(geo_locations)){
each_location <- geo_locations[i,]
print(each_location)
g <- g+geom_point(data=each_location,aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
print(g)
}
}
plotfoo()
help("saveMovie")
saveMovie(plotfoo(),interval = 0.1)
library(animation)
saveMovie(plotfoo(),interval = 0.1)
saveGIF(plotfoo(),interval = 0.1)
install.packages("ImageMagick")
install.ImageMagick()
install.packages("magick")
library(magick)
saveGIF(plotfoo(),interval = 0.1)
oopt = ani.options(interval = 1, nmax = nrow(geo_locations))
saveGIF(plotfoo(),interval = 0.1)
library(devtools)
dev_mode(on=T)
oopt = ani.options(interval = 1, nmax = nrow(geo_locations))
saveGIF(plotfoo(),interval = 0.1)
dev_mode(on=F)
require(installr)
install.packages("installr")
install.packages("installr")
as.Date(df$Opened)
head(df$Opened)
(df$Opened)
as.Date.date(df$Opened)
as.Date.dates(df$Opened)
as.Date(df$Opened,"%m-%d-%y")
df$Opened
as.Date(df$Opened,"%m/%d%y")
as.Date(df$Opened,"%m\/%d\%y")
head(df$Opened)
as.Date(df$Opened,"%m%d%y")
head(df$Opened)
as.Date(df$Opened,"%m//%d//%y")
head(df$Opened)
saveGIF(plotfoo(),interval = 0.1)
gsub('\\',"haha","haha\haha")
gsub('\\',"haha","haha\\haha")
gsub('\\',"haha","haha/\\haha")
as.Date(df$Opened)
help("as.Date")
as.Date(df$Opened,"%m/%d/%y")
df["date"] = as.Date(df$Opened,"%m/%d/%y")
help(order)
order(df$date)
df = df[order(df$date),]
help(df)
head(df)
tail(df)
load("starbucks_data.Rda")
df <- df[[1]]
colnames(df) <- df[1,]
df <- df[2:nrow(df),]
head(df)
df["date"] = as.Date(df$Opened,"%m/%d/%y")
head(df)
as.numeric(df$Opened)
gsub("\","",df$open)
;
)
)
dafs
return
print()
head(df)
library(ggmap)
library(ggplot2)
library(rvest)
library(dplyr)
library(maps)
library(animation)
library(magick)
oopt = ani.options(interval = 1, nmax = nrow(geo_locations))
saveGIF(plotfoo(),interval = 0.1)
oopt = ani.options(interval = 1, nmax = nrow(geo_locations))
saveGIF(plotfoo(),interval = 0.1)
df = read.csv("train_subset.csv")
# split into training and testing
sub = createDataPartition(df$id)
training <- df[unlist(sub),]
validation <- df[-unlist(sub),]
valid_true_response = validation$loss
drop <- c('loss')
validation <- validation[,!names(validation) %in% drop]
setwd("~/Desktop/Allstate Claim Competition")
df = read.csv("train_subset.csv")
# split into training and testing
sub = createDataPartition(df$id)
training <- df[unlist(sub),]
validation <- df[-unlist(sub),]
valid_true_response = validation$loss
drop <- c('loss')
validation <- validation[,!names(validation) %in% drop]
library(e1071)
library(dplyr)
library(magrittr)
library(rpart)
library(caret)
library(hydroGOF)
df = read.csv("train_subset.csv")
# split into training and testing
sub = createDataPartition(df$id)
training <- df[unlist(sub),]
validation <- df[-unlist(sub),]
valid_true_response = validation$loss
drop <- c('loss')
validation <- validation[,!names(validation) %in% drop]
names(df)
setwd("~/Desktop/OneDrive/myGit/Statistics-Projects/Starbucks Investigation")
url = "http://www.starbuckseverywhere.net/StoreOpeningDates.htm"
# html <- html(url)
#
# df <- html %>% html_nodes("table") %>% html_table()
# save(df,file = "starbucks_data.Rda")
load("starbucks_data.Rda")
df <- df[[1]]
colnames(df) <- df[1,]
df <- df[2:nrow(df),]
head(df)
df["date"] = as.Date(df$Opened,"%m/%d/%y")
head(df)
row = df[1,]
help(split)
help(split)
row = df[1,]
split(row$Opened,"/")
row = df[1,]
split(row$Opened,"//")
library(ggmap)
library(ggplot2)
library(rvest)
library(dplyr)
library(maps)
library(animation)
library(stringr)
str_split(row$Opened,"/")
str_split(df$Opened,"/")
date_info<- split(row$Opened,"/")
data_info <- unlist(data_info)
date_info<- split(row$Opened,"/")
date_info <- unlist(data_info)
date_info<- split(row$Opened,"/")
date_info <- unlist(date_info)
date_info
date_info<- str_split(row$Opened,"/")
date_info <- unlist(date_info)
date_info
as.numeric(date_info)
date_info<- str_split(row$Opened,"/")
date_info <- unlist(date_info)
date_info <- as.numeric(date_info)
as.Date(date_info)
date_info
paste(date_info)
type(date_info)
typeof(date_info)
date_info<- str_split(df$Opened,"/")
date_info <- unlist(date_info)
date_info <- as.numeric(date_info)
head(date_info)
date_info
help("matrix")
matrix(date_info,ncol=3,byrow = T)
date_info <- as.data.frame(matrix(date_info,ncol=3,byrow = T))
head(date_info)
help("date")
date_info <- as.data.frame(matrix(date_info,ncol=3,byrow = T))
names(date_info) <- c("month",'day','year')
head(date_info)
row = df[1,]
date_info<- str_split(df$Opened,"/")
date_info <- unlist(date_info)
date_info <- as.numeric(date_info)
date_info <- as.data.frame(matrix(date_info,ncol=3,byrow = T))
names(date_info) <- c("month",'day','year')
head(date_info)
df <- df[[1]]
colnames(df) <- df[1,]
df <- df[2:nrow(df),]
#
# df["date"] = as.Date(df$Opened,"%m/%d/%y")
# df = df[order(df$date),]
row = df[1,]
date_info<- str_split(df$Opened,"/")
date_info <- unlist(date_info)
date_info <- as.numeric(date_info)
date_info <- as.data.frame(matrix(date_info,ncol=3,byrow = T))
names(date_info) <- c("month",'day','year')
head(date_info)
row = df[1,]
head(df)
url = "http://www.starbuckseverywhere.net/StoreOpeningDates.htm"
# html <- html(url)
#
# df <- html %>% html_nodes("table") %>% html_table()
# save(df,file = "starbucks_data.Rda")
load("starbucks_data.Rda")
df <- df[[1]]
colnames(df) <- df[1,]
df <- df[2:nrow(df),]
#
# df["date"] = as.Date(df$Opened,"%m/%d/%y")
# df = df[order(df$date),]
row = df[1,]
date_info<- str_split(df$Opened,"/")
date_info <- unlist(date_info)
date_info <- as.numeric(date_info)
date_info <- as.data.frame(matrix(date_info,ncol=3,byrow = T))
names(date_info) <- c("month",'day','year')
head(date_info)
df <- rbind(df,date_info)
ncol(df)
df <- cbind(df,date_info)
head(df)
df[order(-df$year,-df$month,df$day),]
df[order(df$year,df$month,df$day),]
head(df)
tail(df)
head(df[order(-df$year,-df$month,-df$day),])
head(df[order(df$year,df$month,df$day),])
geo_locations <- data.frame()
for(i in 1:nrow(df)){
row <- df[i,]
location_str <- paste(row$Market,row$City,row$Name)
geo<-geocode(location_str)
geo_locations<- rbind(geo_locations,geo)
}
help("geocode")
geo_locations <- data.frame()
for(i in 1:nrow(df)){
row <- df[i,]
location_str <- paste(row$Market,row$City,row$Name)
geo<-geocode(location_str,source = "dsk")
geo_locations<- rbind(geo_locations,geo)
}
geo_locations
save(geo_locations,file = "geo_locations.Rda")
mapgilbert <- get_map(location = c(lon = -98.5795, lat = 39.8282), zoom = 3,
maptype = "satellite", scale = 2)
g<-ggmap(mapgilbert)
# g<-g+geom_point(data = geo_locations, aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
g
plotfoo<- function(){
for(i in 1:nrow(geo_locations)){
each_location <- geo_locations[i,]
print(each_location)
g <- g+geom_point(data=each_location,aes(x = lon, y = lat, fill = "red"), size = 3, shape = 21,alpha=0.8)
print(g)
}
}
oopt = ani.options(interval = 1, nmax = nrow(geo_locations))
saveGIF(plotfoo(),interval = 0.05)
setwd("~/Desktop/OneDrive/myGit/Statistics-Projects/Starbucks Investigation")
help("geocode")
row
help("str_replace")
str_replace(row$City,"\"," ")
;
sadfjlasd
