head(df)
type(df)
typeof(df)
source('~/Desktop/OneDrive/myGit/Statistics-Related/Target Investigation/Target Investigation.R', echo=TRUE)
df <- jlist[2]
df <- as.data.frame(df)
head(df)
names(df)
head(df$storeList.zipCode)
gsub("-*","",df$storeList.zipCode)
source('~/Desktop/OneDrive/myGit/Statistics-Related/Target Investigation/Target Investigation.R', echo=TRUE)
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.numeric(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName=Alabama"
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
head(df)
gsub("-****","",df$storeList.zipCode)
help("gsub")
gsub("-.*","",df$storeList.zipCode)
state.name
state = state.name[0]
state
state = state.name[1]
state
base_url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName=Alabama"
state = state.name[1]
paste(base_url,state)
base_url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName="
state = state.name[1]
paste(base_url,state)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
head(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
table(df$storeList.zipCode)
as.data_frame(table(df$storeList.zipCode))
as.data.frame(table(df$storeList.zipCode))
paste(base_url,state)
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.numeric(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName="
state = state.name[1]
df_store_info= data.frame()
for(state in state.name){
paste(base_url,state)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
head(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
df_store_info
nrow(df_store_info)
names(df_store_info)
names(df_store_info) <- c("ZipCode","#stores")
nrow(as.data.frame(table(df_store_info$ZipCode)))
as.data.frame(table(df_store_info$ZipCode))
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.numeric(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName="
df_store_info= data.frame()
for(state in state.name){
paste(base_url,state)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
as.data.frame(table(df_store_info$ZipCode))
df_store_info= data.frame()
for(state in state.name){
print(state)
paste(base_url,state)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.numeric(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName="
df_store_info= data.frame()
for(state in state.name){
print(state)
paste(base_url,state,sep = "")
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
as.data.frame(table(df_store_info$ZipCode))
library(readr)
library(rvest)
library(jsonlite)
library(httr)
base_url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName="
df_store_info= data.frame()
for(state in state.name){
print(state)
paste(base_url,state,sep = "")
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
df_store_info= data.frame()
for(state in state.name){
print(state)
state=state.name[1]
paste(base_url,state,sep = "")
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
df_store_info= data.frame()
for(state in state.name){
print(state)
paste(base_url,state,collapse = "")
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
for(state in state.name){
print(state)
url<-paste(base_url,state,collapse = "")
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
as.data.frame(table(df_store_info$ZipCode))
df_store_info
names(df_store_info) <- c("ZipCode","#stores")
as.data.frame(table(df_store_info$ZipCode))
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.numeric(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName="
df_store_info= data.frame()
for(state in state.name){
print(state)
url<-paste(base_url,state,collapse = "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
as.data.frame(table(df_store_info$ZipCode))
state
url<-paste(base_url,state,collapse = "")
url
url<-paste(base_url,state,sep= "")
url
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.numeric(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url="http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode=AL&stateName="
df_store_info= data.frame()
for(state in state.name){
print(state)
url<-paste(base_url,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
as.data.frame(table(df_store_info$ZipCode))
base_url1<-"http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode="
base_url2<-"&stateName="
df_store_info= data.frame()
for(state in state.name){
print(state)
state_abbrev<-state.abb[grep(state, state.name)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
state.abb
df_store_info= data.frame()
for(state_abbrev in state.name){
print(state)
state<-state[grep(state_abbrev,state.abb)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
df_store_info= data.frame()
for(state_abbrev in state.abb){
state<-state.name[grep(state_abbrev,state.abb)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
tail(df_store_info)
as.data.frame(table(df_store_info$ZipCode))
tail(df_store_info)
df_store_info <-as.data.frame(table(df_store_info$ZipCode))
head(df_store_info)
names(df_store_info) <- c("ZipCode","#stores")
str(df_store_info)
df_store_info$ZipCode <- as.numeric(df_store_info$ZipCode)
str(income_df)
head(income_df)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.numeric(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
income_df
head(income_df)
tail(income_df)
str(df_store_info)
head(df_store_info)
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.factor(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url1<-"http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode="
base_url2<-"&stateName="
df_store_info= data.frame()
for(state_abbrev in state.abb){
state<-state.name[grep(state_abbrev,state.abb)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
df_store_info <-as.data.frame(table(df_store_info$ZipCode))
names(df_store_info) <- c("ZipCode","#stores")
df_store_info$ZipCode <- as.factor(df_store_info$ZipCode)
df_store_info= data.frame()
for(state_abbrev in state.abb){
state<-state.name[grep(state_abbrev,state.abb)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
location_html <- read_html(url)
df_store_info
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.factor(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url1<-"http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode="
base_url2<-"&stateName="
df_store_info= data.frame()
for(state_abbrev in state.abb){
state<-state.name[grep(state_abbrev,state.abb)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
df_store_info <-as.data.frame(table(df_store_info$ZipCode))
names(df_store_info) <- c("ZipCode","#stores")
df_store_info$ZipCode <- as.factor(df_store_info$ZipCode)
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.factor(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url1<-"http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode="
base_url2<-"&stateName="
df_store_info= data.frame()
for(state_abbrev in state.abb){
state<-state.name[grep(state_abbrev,state.abb)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
df_store_info <-as.data.frame(table(df_store_info$ZipCode))
names(df_store_info) <- c("ZipCode","#stores")
df_store_info$ZipCode <- as.factor(df_store_info$ZipCode)
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.factor(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url1<-"http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode="
base_url2<-"&stateName="
df_store_info= data.frame()
for(state_abbrev in state.abb){
state<-state.name[grep(state_abbrev,state.abb)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
df_store_info <-as.data.frame(table(df_store_info$ZipCode))
names(df_store_info) <- c("ZipCode","#stores")
df_store_info$ZipCode <- as.factor(df_store_info$ZipCode)
merge(df_store_info,income_df,by=c(ZipCode,Geography))
library(readr)
library(rvest)
library(jsonlite)
library(httr)
income_df = read.csv("input/ACS_14_5YR_B19013_with_ann.csv",skip =1)
colnames(income_df)[4]<-"estimate_median"
colnames(income_df)[5]<-"marginal_error"
income_df$Geography=gsub("ZCTA5 ","" ,income_df$Geography)
income_df$Geography = as.factor(income_df$Geography)
income_df$estimate_median = as.numeric(income_df$estimate_median)
base_url1<-"http://gam.target.com/store-locator/state-result?lnk=statelisting_stateresult&stateCode="
base_url2<-"&stateName="
df_store_info= data.frame()
for(state_abbrev in state.abb){
state<-state.name[grep(state_abbrev,state.abb)]
url<-paste(base_url1,state_abbrev,base_url2,state,sep= "")
print(url)
location_html <- read_html(url)
json <- html_nodes(location_html,"#primaryJsonResponse") %>% html_text()
jlist <-fromJSON(json)
df <- jlist[2]
df <- as.data.frame(df)
df$storeList.zipCode <- gsub("-.*","",df$storeList.zipCode)
df_summary <- as.data.frame(table(df$storeList.zipCode))
df_store_info <- rbind(df_store_info,df_summary)
}
names(df_store_info) <- c("ZipCode","#stores")
df_store_info <-as.data.frame(table(df_store_info$ZipCode))
names(df_store_info) <- c("ZipCode","#stores")
df_store_info$ZipCode <- as.factor(df_store_info$ZipCode)
merge(df_store_info,income_df,by=c(ZipCode,Geography))
version
help("write_csv")
install.packages(c("rvest","readr"))
install.packages(c("rvest", "readr"))
install.packages(c("rvest", "readr",'xml2','jsonlite','httr'))
